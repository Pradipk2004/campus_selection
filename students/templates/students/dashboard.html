{% extends "base.html" %}

{% block content %}
<style>
  /* Dashboard Cards */
  .dashboard-card {
    cursor: pointer;
    position: relative;
    border-radius: 16px;
    padding: 25px;
    backdrop-filter: blur(12px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    transition: transform 0.5s, box-shadow 0.5s, background-color 0.5s, color 0.5s;
    animation: float 6s ease-in-out infinite;
  }

  /* Light Mode Cards */
  body.light-mode .dashboard-card {
    background-color: rgba(255, 255, 255, 0.65);
    color: #212529;
    border: 1px solid rgba(255,255,255,0.2);
  }

  /* Dark Mode Cards */
  body.dark-mode .dashboard-card {
    background-color: rgba(30, 30, 30, 0.65);
    color: #f8f9fa;
    border: 1px solid rgba(255,255,255,0.1);
  }

  /* Hover effect */
  .dashboard-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.35);
  }

  /* Icon animation on hover */
  .dashboard-card i {
    transition: transform 0.3s;
  }
  .dashboard-card:hover i {
    transform: scale(1.3);
  }

  /* Card color-coded borders */
  .card-jobs { border-top: 4px solid #0d6efd; }
  .card-applications { border-top: 4px solid #198754; }
  .card-interviews { border-top: 4px solid #ffc107; }
  .card-chat { border-top: 4px solid #0dcaf0; }

  /* Animated badge for notifications */
  .badge-notify {
    position: absolute;
    top: 10px;
    right: 15px;
    padding: 5px 10px;
    border-radius: 50%;
    animation: pulse 1.5s infinite;
    font-size: 0.8rem;
  }

  @keyframes pulse {
    0% { transform: scale(1); opacity: 0.8; }
    50% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); opacity: 0.8; }
  }

  /* Floating animation for all cards */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
  }

  /* Recent Activities Styling */
  .list-group-item {
    backdrop-filter: blur(8px);
    transition: background-color 0.5s, color 0.5s;
  }
  body.light-mode .list-group-item {
    background-color: rgba(255,255,255,0.6);
    color: #212529;
    border: 1px solid rgba(255,255,255,0.2);
  }
  body.dark-mode .list-group-item {
    background-color: rgba(30,30,30,0.6);
    color: #f8f9fa;
    border: 1px solid rgba(255,255,255,0.1);
  }
</style>

<div class="container mt-5">
  <h1 class="mb-4">Student Dashboard</h1>

  <div class="row g-4">

    <!-- Jobs Card -->
    <div class="col-md-3">
      <div class="card shadow-sm text-center h-100 dashboard-card card-jobs">
        <div class="card-body">
          <i class="bi bi-briefcase-fill display-4 mb-3 text-primary"></i>
          <h5 class="card-title">Available Jobs</h5>
          <p class="display-6">{{ jobs_count }}</p>
          <a href="{% url 'students:jobs_list' %}" class="btn btn-outline-primary btn-sm">View Jobs</a>
        </div>
      </div>
    </div>

    <!-- Applications Card -->
    <div class="col-md-3">
      <div class="card shadow-sm text-center h-100 dashboard-card card-applications">
        <div class="card-body">
          <i class="bi bi-file-earmark-text-fill display-4 mb-3 text-success"></i>
          <h5 class="card-title">Applications</h5>
          <p class="display-6">{{ apps_count }}</p>
          <a href="{% url 'students:applications' %}" class="btn btn-outline-success btn-sm">View Applications</a>
        </div>
      </div>
    </div>

    <!-- Upcoming Interview Card -->
    <div class="col-md-3">
      <div class="card shadow-sm text-center h-100 dashboard-card card-interviews">
        <div class="card-body">
          <i class="bi bi-calendar-check-fill display-4 mb-3 text-warning"></i>
          <h5 class="card-title">Upcoming Interview</h5>
          {% if next_interview %}
            <p class="mb-1">{{ next_interview.job.title }}</p>
            <small class="text-muted">{{ next_interview.date }} at {{ next_interview.time }}</small>
            <span class="badge bg-warning text-dark badge-notify">!</span>
          {% else %}
            <p class="text-muted">No upcoming interviews</p>
          {% endif %}
          <a href="{% url 'students:interviews' %}" class="btn btn-outline-warning btn-sm mt-2">View All</a>
        </div>
      </div>
    </div>

    <!-- Chat Notifications Card -->
    <div class="col-md-3">
      <div class="card shadow-sm text-center h-100 dashboard-card card-chat">
        <div class="card-body">
          <i class="bi bi-chat-dots-fill display-4 mb-3 text-info"></i>
          <h5 class="card-title">Chat Notifications</h5>
          <p class="display-6">{{ unread_messages_count }}</p>
          {% if unread_messages_count > 0 %}
            <span class="badge bg-danger badge-notify">{{ unread_messages_count }}</span>
          {% endif %}
          <a href="{% url 'students:chat' %}" class="btn btn-outline-info btn-sm">Go to Chat</a>
        </div>
      </div>
    </div>

  </div>

  <!-- Recent Activities Section -->
  <div class="mt-5">
    <h4>Recent Activities</h4>
    <ul class="list-group">
      {% for activity in recent_activities %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ activity.description }}
          <span class="text-muted small">{{ activity.timestamp }}</span>
        </li>
      {% empty %}
        <li class="list-group-item text-muted">No recent activities.</li>
      {% endfor %}
    </ul>
  </div>
</div>

{% endblock %}
